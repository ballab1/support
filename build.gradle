/*
 * This file was generated by the Gradle 'init' task.
 *
 * This generated file contains a sample Groovy project to get you started.
 * For more details take a look at the Groovy Quickstart chapter in the Gradle
 * User Manual available at https://docs.gradle.org/5.4.1/userguide/tutorial_groovy_projects.html
 */

buildscript {
    repositories {
        gradlePluginPortal()
        jcenter()
        maven { url 'https://plugins.gradle.org/m2/' }
    }
    dependencies {
        classpath 'com.jfrog.bintray.gradle:gradle-bintray-plugin:1.8.4'
        classpath 'com.gradle.publish:plugin-publish-plugin:0.10.1'
        classpath 'com.avast.gradle:gradle-docker-compose-plugin:0.9.4'
    }
}

plugins {
    // Apply the groovy plugin to add support for Groovy
    id 'groovy'
    id 'java'
    id 'maven'
    id "com.avast.gradle.docker-compose" version "0.9.4"
    id 'com.gradle.build-scan' version '2.3' 
//    id 'org.home.builds.compose'  apply false
}

repositories {
    // Use jcenter for resolving your dependencies.
    // You can declare any Maven/Ivy/file repository here.
    gradlePluginPortal()
    jcenter()
    maven { url 'https://plugins.gradle.org/m2/' }
}

dependencies {
    // Use the latest Groovy version for building this library
    implementation 'org.codehaus.groovy:groovy-all:2.5.6'
    implementation 'com.avast.gradle:gradle-docker-compose-plugin:0.9.4'

    // Use the awesome Spock testing and specification framework
//    testImplementation 'org.spockframework:spock-core:1.2-groovy-2.5'
}

allprojects {
    repositories {
        gradlePluginPortal()
        jcenter() 
    }
} 

subprojects {
    apply plugin: 'groovy'
    apply plugin: 'java'
    apply plugin: 'maven'
    apply plugin: 'docker-compose'
//    apply plugin: 'org.home.builds.compose'

    dockerCompose {
        useComposeFiles = ['docker-compose.yml']
        projectName = project.name

        environment.put 'CONTAINER_BUILD_TIME', '20190511-003312.904760492'
        environment.put 'CONTAINER_FINGERPRINT', '86a7c9bc97cc865e1b8994ea6e7137650e06172215fb973f7182d54961c16891'
        environment.put 'CONTAINER_GIT_REFS', '(HEAD -> dev, origin/dev)'
        environment.put 'CONTAINER_GIT_COMMIT', 'container_git_commit'
        environment.put 'CONTAINER_GIT_URL', 'https://github.com/ballab1/base_container.git'
        environment.put 'CONTAINER_ORIGIN', 'v3.7'
        environment.put 'CONTAINER_PARENT', 'ubuntu-s2:5000/alpine:3.8'
        environment.put 'CBF_VERSION', '625953c1a72786bf1d7f5a7c91f076a26baec57d'
        environment.put 'CONTAINER_OS', 'alpine'
        environment.put 'OS_VERSION', '3.8'

//        isRequiredBy('me')
    }
}

version = version == 'unspecified' ? 'DEVELOPER-SNAPSHOT' : version
