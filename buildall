#!/bin/bash

declare start=$(date +%s) 

export CFG_GITHUB_EMAIL=''
export CFG_GITHUB_HUBOT_TOKEN=''
export CFG_GITHUB_JENKINS_EMAIL=''
export CFG_GITHUB_JENKINS_NAME=''
export CFG_GITHUB_JENKINS_TOKEN=''
export CFG_GITHUB_JENKINS_USER=''
export CFG_GITHUB_NAME=''
export CFG_GITHUB_TOKEN=''
export CFG_GITHUB_USER=''
export CFG_PASS=''
export CFG_SLACK_HUBOT_TOKEN=''
export CFG_USER=''

[ -z "${CBF_VERSION:-}" ] || unset CBF_VERSION
[ -z "${CONTAINER_TAG:-}" ] || unset CONTAINER_TAG

#set -o xtrace
set -o errexit
set -o nounset
set -o verbose

CBF_VERSION=dev docker-compose build base
docker-compose build supervisord
docker-compose build nginx_base
docker-compose build php5
docker-compose build php7
docker-compose build openjdk8
docker-compose build openjre8
docker-compose build perl
docker-compose build carton

docker-compose build hubot
docker-compose build jenkins
docker-compose build broker
docker-compose build kafkamgr
docker-compose build zookeeper
docker-compose build mysql
docker-compose build nagios
docker-compose build nginx
docker-compose build phpadmin
docker-compose build postgres
docker-compose build smonitor
docker-compose build webdav
docker-compose build zen

docker-compose build alpinefull
docker-compose build files-kafka
docker-compose build files-librd
docker-compose build gradle
#docker-compose build jbe
#docker-compose build jfdk
docker-compose build movefiles

set +o verbose
declare finish=$(date +%s)
declare -i elapsed=$(( finish - start ))

echo ''
echo ''
TZ='America/New_York' date
printf "Time elapsed: %02d:%02d:%02d\n"  $((elapsed / 3600)) $((elapsed % 3600 / 60)) $((elapsed % 60))  
